{"version":3,"sources":["Footer.jsx","Header.jsx","Spinner.jsx","services/useFetch.jsx","PageNotFound.jsx","Products.jsx","cartReducer.js","CartContext.js","Detail.jsx","Cart.jsx","services/useFetchAll.js","services/shippingService.js","Checkout.jsx","App.jsx","ErrorBoundary.jsx","index.js"],"names":["Footer","activeStyle","color","Header","to","alt","src","Spinner","className","baseUrl","process","REACT_APP_API_BASE_URL","useFetch","url","isMounted","useRef","useState","data","setData","error","setError","loading","setLoading","useEffect","a","fetch","response","ok","json","current","init","PageNotFound","Products","size","setSize","category","useParams","products","filterProducts","filter","product","skus","find","s","parseInt","length","id","htmlFor","value","onChange","e","target","map","children","key","image","name","price","cartReducer","cart","action","type","quantity","sku","i","Error","initialCart","CartContext","React","createContext","JSON","parse","localStorage","getItem","console","CartProvider","props","useReducer","dispatch","setItem","stringify","contextValue","Provider","useCart","context","useContext","Detail","navigate","useNavigate","setSku","description","onClick","disabled","Cart","urls","prevUrls","array1","array2","every","index","promises","then","Promise","all","catch","finally","useFetchAll","numItemsInCart","reduce","total","item","itemInCart","p","aria-label","saveShippingAddress","address","method","headers","body","STATUS","emptyAddress","city","country","Checkout","setAddress","status","setStatus","saveError","setSaveError","touched","setTouched","errors","result","getErrors","isValid","Object","keys","handleChange","persist","curAdd","handleBlur","event","cur","preventDefault","role","onSubmit","onBlur","App","path","element","ErrorBoundary","state","hasError","this","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c88fd7c9.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default function Footer() {\n  return (\n    <footer>\n      <p>\n        This site is created for demonstrative purposes only and does not offer\n        any real products or services.\n      </p>\n      <p>&copy; Pluralsight 2020</p>\n    </footer>\n  );\n}\n","import React from \"react\";\nimport { Link, NavLink } from \"react-router-dom\";\n\nconst activeStyle = {\n  color: \"purple\",\n};\n\nexport default function Header() {\n  return (\n    <header>\n      <nav>\n        <ul>\n          <li>\n            <Link to=\"/\">\n              <img alt=\"Carved Rock Fitness\" src=\"/images/logo.png\" />\n            </Link>\n          </li>\n\n          <li>\n            <NavLink activeStyle={activeStyle} to=\"/shoes\">\n              Shoes\n            </NavLink>\n          </li>\n\n          <li>\n            <NavLink to=\"/cart\" activeStyle={activeStyle}>\n              Cart\n            </NavLink>\n          </li>\n        </ul>\n      </nav>\n    </header>\n  );\n}\n","import React from \"react\";\n\nexport default function Spinner() {\n  return (\n    <div className=\"lds-container\">\n      <div className=\"lds-dual-ring\"></div>\n    </div>\n  );\n}\n","import { useState, useEffect, useRef } from \"react\";\r\nconst baseUrl = process.env.REACT_APP_API_BASE_URL;\r\n\r\nexport default function useFetch(url) {\r\n  const isMounted = useRef(false);\r\n  const [data, setData] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    async function init() {\r\n      try {\r\n        const response = await fetch(baseUrl + url);\r\n        if (response.ok) {\r\n          const json = await response.json();\r\n          if (isMounted.current) setData(json);\r\n        }\r\n      } catch (error) {\r\n        if (isMounted.current) setError(error);\r\n      } finally {\r\n        if (isMounted.current) setLoading(false);\r\n      }\r\n    }\r\n    init();\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n  }, [url]);\r\n\r\n  return {\r\n    data,\r\n    error,\r\n    loading,\r\n  };\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function PageNotFound() {\r\n  return <h1>Page Not Found</h1>;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport Spinner from \"./Spinner\";\r\nimport useFetch from \"./services/useFetch\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport PageNotFound from \"./PageNotFound\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Products() {\r\n  const [size, setSize] = useState(\"\");\r\n  const { category } = useParams();\r\n\r\n  const { data: products, error, loading } = useFetch(\r\n    \"products?category=\" + category\r\n  );\r\n\r\n  const renderProduct = (product) => {\r\n    return (\r\n      <div children=\"product\" key={product.id}>\r\n        <Link to={`/${category}/${product.id}`}>\r\n          <img src={`/images/${product.image}`} alt={product.name} />\r\n          <h3>{product.name}</h3>\r\n          <p>${product.price}</p>\r\n        </Link>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const filterProducts = size\r\n    ? products.filter((product) =>\r\n        product.skus.find((s) => s.size === parseInt(size))\r\n      )\r\n    : products;\r\n\r\n  if (error) throw error;\r\n  if (loading) return <Spinner />;\r\n  if (products.length === 0) return <PageNotFound />;\r\n\r\n  return (\r\n    <>\r\n      <section id=\"filters\">\r\n        <label htmlFor=\"size\">Filter by Size:</label>{\" \"}\r\n        <select\r\n          id=\"size\"\r\n          value={size}\r\n          onChange={(e) => {\r\n            setSize(e.target.value);\r\n          }}\r\n        >\r\n          <option value=\"\">All sizes</option>\r\n          <option value=\"7\">7</option>\r\n          <option value=\"8\">8</option>\r\n          <option value=\"9\">9</option>\r\n        </select>\r\n      </section>\r\n      {size && <h2>Found {filterProducts.length} items</h2>}\r\n      <section id=\"products\">{filterProducts.map(renderProduct)}</section>\r\n    </>\r\n  );\r\n}\r\n","export default function cartReducer(cart, action) {\r\n  switch (action.type) {\r\n    case \"empty\":\r\n      return [];\r\n    case \"updateQuantity\": {\r\n      const { quantity, sku } = action;\r\n      return quantity === 0\r\n        ? cart.filter((i) => i.sku !== sku)\r\n        : cart.map((i) => (i.sku === sku ? { ...i, quantity } : i));\r\n    }\r\n    case \"add\":\r\n      const { id, sku } = action;\r\n      const itemInCart = cart.find((i) => i.sku === sku);\r\n      if (itemInCart) {\r\n        // Return new array with the matching item replaced\r\n        return cart.map((i) =>\r\n          i.sku === sku ? { ...i, quantity: i.quantity + 1 } : i\r\n        );\r\n      } else {\r\n        // Return new array with the new item appended\r\n        return [...cart, { id, sku, quantity: 1 }];\r\n      }\r\n    default:\r\n      throw new Error(\"Unhandled action \" + action.type);\r\n  }\r\n}\r\n","import React, { useReducer, useEffect, useContext } from \"react\";\r\nimport cartReducer from \"./cartReducer\";\r\n\r\nexport const CartContext = React.createContext(null);\r\n\r\nlet initialCart;\r\ntry {\r\n  initialCart = JSON.parse(localStorage.getItem(\"cart\")) ?? [];\r\n} catch {\r\n  console.error(\"The cart could not be parsed into JSON.\");\r\n  initialCart = [];\r\n}\r\nexport function CartProvider(props) {\r\n  const [cart, dispatch] = useReducer(cartReducer, initialCart);\r\n  useEffect(() => localStorage.setItem(\"cart\", JSON.stringify(cart)), [cart]);\r\n\r\n  const contextValue = {\r\n    cart,\r\n    dispatch,\r\n  };\r\n  return (\r\n    <CartContext.Provider value={contextValue}>\r\n      {props.children}\r\n    </CartContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useCart() {\r\n  const context = useContext(CartContext);\r\n  if (!context) {\r\n    throw new Error(\"useCart must be used within a cardprovider\");\r\n  }\r\n  return context;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport useFetch from \"./services/useFetch\";\r\nimport Spinner from \"./Spinner\";\r\nimport PageNotFound from \"./PageNotFound\";\r\nimport { useCart } from \"./CartContext\";\r\n\r\nexport default function Detail(props) {\r\n  const { dispatch } = useCart();\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { data: product, error, loading } = useFetch(`products/${id}`);\r\n  const [sku, setSku] = useState(\"\");\r\n\r\n  if (loading) return <Spinner />;\r\n  if (!product) return <PageNotFound />;\r\n  if (error) throw error;\r\n\r\n  return (\r\n    <div id=\"detail\">\r\n      <h1>{product.name}</h1>\r\n      <p>{product.description}</p>\r\n      <p id=\"price\">{product.price}</p>\r\n      <select\r\n        id=\"size\"\r\n        value={sku}\r\n        onChange={(e) => {\r\n          setSku(e.target.value);\r\n        }}\r\n      >\r\n        <option value=\"\">What size?</option>\r\n        {product.skus.map((s) => (\r\n          <option value={s.sku} key={s.sku}>\r\n            {s.size}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      <p>\r\n        <button\r\n          className=\"btn btn-primary\"\r\n          onClick={() => {\r\n            dispatch({ type: \"add\", id, sku });\r\n            navigate(\"/cart\");\r\n          }}\r\n          disabled={!sku}\r\n        >\r\n          Add To Cart\r\n        </button>\r\n      </p>\r\n      <img src={`/images/${product.image}`} alt={product.category} />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport useFetchAll from \"./services/useFetchAll\";\r\nimport Spinner from \"./Spinner\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useCart } from \"./CartContext\";\r\n\r\nexport default function Cart() {\r\n  const { cart, dispatch } = useCart();\r\n  const urls = cart.map((i) => `products/${i.id}`);\r\n  const { data: products, loading, error } = useFetchAll(urls);\r\n  const navigate = useNavigate();\r\n  function renderItem(itemInCart) {\r\n    const { id, sku, quantity } = itemInCart;\r\n    const { price, name, image, skus } = products.find(\r\n      (p) => p.id === parseInt(id)\r\n    );\r\n    const { size } = skus.find((s) => s.sku === sku);\r\n\r\n    return (\r\n      <li key={sku} className=\"cart-item\">\r\n        <img src={`/images/${image}`} alt={name} />\r\n        <div>\r\n          <h3>{name}</h3>\r\n          <p>${price}</p>\r\n          <p>Size: {size}</p>\r\n          <p>\r\n            <select\r\n              aria-label={`Select quantity for ${name} size ${size}`}\r\n              onChange={(e) => {\r\n                dispatch({\r\n                  type: \"updateQuantity\",\r\n                  sku,\r\n                  quantity: parseInt(e.target.value),\r\n                });\r\n              }}\r\n              value={quantity}\r\n            >\r\n              <option value=\"0\">Remove</option>\r\n              <option value=\"1\">1</option>\r\n              <option value=\"2\">2</option>\r\n              <option value=\"3\">3</option>\r\n              <option value=\"4\">4</option>\r\n              <option value=\"5\">5</option>\r\n            </select>\r\n          </p>\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  if (loading) return <Spinner />;\r\n  if (error) throw error;\r\n\r\n  const numItemsInCart = cart.reduce((total, item) => total + item.quantity, 0);\r\n\r\n  return (\r\n    <section id=\"cart\">\r\n      <h1>\r\n        {numItemsInCart === 0\r\n          ? \"Your cart is empty\"\r\n          : `${numItemsInCart} item${numItemsInCart > 1 ? \"s\" : \"\"} in My Cart`}\r\n      </h1>\r\n      <ul>{cart.map(renderItem)}</ul>\r\n      {cart.length > 0 && (\r\n        <button\r\n          className=\"btn btn-primary\"\r\n          onClick={() => navigate(\"/checkout\")}\r\n        >\r\n          Checkout\r\n        </button>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n","import { useState, useEffect, useRef } from \"react\";\r\n\r\nexport default function useFetchAll(urls) {\r\n  const prevUrls = useRef([]);\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    //only run if the array of URLs passed in changes\r\n    if (areEqual(prevUrls.current, urls)) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    prevUrls.current = urls;\r\n\r\n    const promises = urls.map((url) =>\r\n      fetch(process.env.REACT_APP_API_BASE_URL + url).then((response) => {\r\n        if (response.ok) return response.json();\r\n        throw response;\r\n      })\r\n    );\r\n\r\n    Promise.all(promises)\r\n      .then((json) => setData(json))\r\n      .catch((e) => {\r\n        console.error(e);\r\n        setError(e);\r\n      })\r\n      .finally(() => setLoading(false));\r\n    // eslint-disable-next-line\r\n  }, [urls]);\r\n\r\n  return { data, loading, error };\r\n}\r\n\r\nfunction areEqual(array1, array2) {\r\n  return (\r\n    array1.length === array2.length &&\r\n    array1.every((value, index) => value === array2[index])\r\n  );\r\n}\r\n","const baseUrl = process.env.REACT_APP_API_BASE_URL;\n\nexport async function getShippingAddress(userId) {\n  return fetch(baseUrl + \"shippingAddress/\" + userId).then((response) => {\n    if (response.ok) return response.json();\n    throw response;\n  });\n}\n\nexport async function saveShippingAddress(address) {\n  return fetch(baseUrl + \"shippingAddress\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(address),\n  });\n}\n","import React, { useState } from \"react\";\r\nimport { saveShippingAddress } from \"./services/shippingService\";\r\nimport { useCart } from \"./CartContext\";\r\nconst STATUS = {\r\n  IDLE: \"IDLE\",\r\n  SUBMITTING: \"SUBMITTING\",\r\n  SUBMITTED: \"SUBMITTED\",\r\n  COMPLETED: \"COMPLETED\",\r\n};\r\n//declaring outside component to avoid recreation on each render\r\nconst emptyAddress = {\r\n  city: \"\",\r\n  country: \"\",\r\n};\r\n\r\nexport default function Checkout() {\r\n  const { dispatch } = useCart();\r\n  const [address, setAddress] = useState(emptyAddress);\r\n  const [status, setStatus] = useState(STATUS.IDLE);\r\n  const [saveError, setSaveError] = useState(null);\r\n  const [touched, setTouched] = useState({});\r\n\r\n  //derived state\r\n  const errors = getErrors(address);\r\n  const isValid = Object.keys(errors).length === 0;\r\n\r\n  function handleChange(e) {\r\n    e.persist();\r\n    setAddress((curAdd) => {\r\n      return {\r\n        ...curAdd,\r\n        [e.target.id]: e.target.value,\r\n      };\r\n    });\r\n  }\r\n\r\n  function handleBlur(event) {\r\n    event.persist();\r\n    setTouched((cur) => {\r\n      return { ...cur, [event.target.id]: true };\r\n    });\r\n  }\r\n\r\n  async function handleSubmit(event) {\r\n    event.preventDefault();\r\n    setStatus(STATUS.SUBMITTING);\r\n    if (isValid) {\r\n      try {\r\n        await saveShippingAddress(address);\r\n        dispatch({ type: \"empty\" });\r\n        setStatus(STATUS.COMPLETED);\r\n      } catch (e) {\r\n        setSaveError(e);\r\n      }\r\n    } else {\r\n      setStatus(STATUS.SUBMITTED);\r\n    }\r\n  }\r\n\r\n  function getErrors(address) {\r\n    const result = {};\r\n    if (!address.city) result.city = \"City is required\";\r\n    if (!address.country) result.country = \"Country is required\";\r\n    return result;\r\n  }\r\n\r\n  if (saveError) throw saveError;\r\n  if (status === STATUS.COMPLETED) {\r\n    return <h1>Thanks for shopping!</h1>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <h1>Shipping Info</h1>\r\n      {!isValid && status === STATUS.SUBMITTED && (\r\n        <div role=\"alert\">\r\n          <p>Please fix the following problems </p>\r\n          <ul>\r\n            {Object.keys(errors).map((key) => {\r\n              return <li key={key}>{errors[key]}</li>;\r\n            })}\r\n          </ul>\r\n        </div>\r\n      )}\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n          <label htmlFor=\"city\">City</label>\r\n          <br />\r\n          <input\r\n            type=\"text\"\r\n            id=\"city\"\r\n            value={address.city}\r\n            onBlur={handleBlur}\r\n            onChange={handleChange}\r\n          />\r\n          <p role=\"alert\">\r\n            {(touched.city || status === STATUS.SUBMITTED) && errors.city}\r\n          </p>\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"country\">Country</label>\r\n          <br />\r\n          <select\r\n            id=\"country\"\r\n            value={address.country}\r\n            onBlur={handleBlur}\r\n            onChange={handleChange}\r\n          >\r\n            <option value=\"\">Select Country</option>\r\n            <option value=\"china\">China</option>\r\n            <option value=\"india\">India</option>\r\n            <option value=\"united kingdom\">United Kingdom</option>\r\n            <option value=\"usa\">USA</option>\r\n          </select>\r\n          <p role=\"alert\">\r\n            {(touched.country || status === STATUS.SUBMITTED) && errors.country}\r\n          </p>\r\n        </div>\r\n\r\n        <input\r\n          type=\"submit\"\r\n          className=\"btn btn-primary\"\r\n          value=\"Save Shipping Info\"\r\n          disabled={status === STATUS.SUBMITTING}\r\n        />\r\n      </form>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\nimport \"./App.css\";\nimport Footer from \"./Footer\";\nimport Header from \"./Header\";\nimport Products from \"./Products\";\nimport { Routes, Route } from \"react-router-dom\";\nimport Detail from \"./Detail\";\nimport Cart from \"./Cart\";\nimport Checkout from \"./Checkout\";\nexport default function App() {\n  return (\n    <>\n      <div className=\"content\">\n        <Header />\n        <main>\n          <Routes>\n            <Route path=\"/\" element={<h1>Welcome to Carved Rock Fitness</h1>} />\n            <Route path=\"/:category\" element={<Products />} />\n            <Route path=\"/:category/:id\" element={<Detail />} />\n            <Route path=\"/cart\" element={<Cart />} />\n            <Route path=\"/checkout\" element={<Checkout />} />\n          </Routes>\n        </main>\n      </div>\n      <Footer />\n    </>\n  );\n}\n","import React from \"react\";\r\nexport default class ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // Update state so the next render will show the fallback UI.\r\n    return { hasError: true };\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // You can render any custom fallback UI\r\n      return <h1>Something went wrong.</h1>;\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport ErrorBoundary from \"./ErrorBoundary\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { CartProvider } from \"./CartContext\";\n\nReactDOM.render(\n  <ErrorBoundary>\n    <BrowserRouter>\n      <CartProvider>\n        <App />\n      </CartProvider>\n    </BrowserRouter>\n  </ErrorBoundary>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}