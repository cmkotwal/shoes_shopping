(this["webpackJsonpreact-state-building-script"]=this["webpackJsonpreact-state-building-script"]||[]).push([[0],{19:function(e,t,n){e.exports=n(28)},24:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),l=n.n(c);n(24);function u(){return r.a.createElement("footer",null,r.a.createElement("p",null,"This site is created for demonstrative purposes only and does not offer any real products or services."),r.a.createElement("p",null,"\xa9 Pluralsight 2020"))}var i=n(3),o={color:"purple"};function s(){return r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{alt:"Carved Rock Fitness",src:"/images/logo.png"}))),r.a.createElement("li",null,r.a.createElement(i.c,{activeStyle:o,to:"/shoes"},"Shoes")),r.a.createElement("li",null,r.a.createElement(i.c,{to:"/cart",activeStyle:o},"Cart")))))}var m=n(2);function p(){return r.a.createElement("div",{className:"lds-container"},r.a.createElement("div",{className:"lds-dual-ring"}))}var E=n(4),d=n.n(E),f=n(7),h=Object({NODE_ENV:"production",PUBLIC_URL:"/shoes_shopping",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_BASE_URL;function v(e){var t=Object(a.useRef)(!1),n=Object(a.useState)(null),r=Object(m.a)(n,2),c=r[0],l=r[1],u=Object(a.useState)(null),i=Object(m.a)(u,2),o=i[0],s=i[1],p=Object(a.useState)(!0),E=Object(m.a)(p,2),v=E[0],b=E[1];return Object(a.useEffect)((function(){function n(){return(n=Object(f.a)(d.a.mark((function n(){var a,r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(h+e);case 3:if(!(a=n.sent).ok){n.next=9;break}return n.next=7,a.json();case 7:r=n.sent,t.current&&l(r);case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),t.current&&s(n.t0);case 14:return n.prev=14,t.current&&b(!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,11,14,17]])})))).apply(this,arguments)}return t.current=!0,function(){n.apply(this,arguments)}(),function(){t.current=!1}}),[e]),{data:c,error:o,loading:v}}var b=n(1);function O(){return r.a.createElement("h1",null,"Page Not Found")}function y(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],c=t[1],l=Object(b.h)().category,u=v("products?category="+l),o=u.data,s=u.error,E=u.loading,d=n?o.filter((function(e){return e.skus.find((function(e){return e.size===parseInt(n)}))})):o;if(s)throw s;return E?r.a.createElement(p,null):0===o.length?r.a.createElement(O,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{id:"filters"},r.a.createElement("label",{htmlFor:"size"},"Filter by Size:")," ",r.a.createElement("select",{id:"size",value:n,onChange:function(e){c(e.target.value)}},r.a.createElement("option",{value:""},"All sizes"),r.a.createElement("option",{value:"7"},"7"),r.a.createElement("option",{value:"8"},"8"),r.a.createElement("option",{value:"9"},"9"))),n&&r.a.createElement("h2",null,"Found ",d.length," items"),r.a.createElement("section",{id:"products"},d.map((function(e){return r.a.createElement("div",{children:"product",key:e.id},r.a.createElement(i.b,{to:"/".concat(l,"/").concat(e.id)},r.a.createElement("img",{src:"/images/".concat(e.image),alt:e.name}),r.a.createElement("h3",null,e.name),r.a.createElement("p",null,"$",e.price)))}))))}var g=n(17),j=n(5);function S(e,t){switch(t.type){case"empty":return[];case"updateQuantity":var n=t.quantity,a=t.sku;return 0===n?e.filter((function(e){return e.sku!==a})):e.map((function(e){return e.sku===a?Object(j.a)(Object(j.a)({},e),{},{quantity:n}):e}));case"add":var r=t.id,c=t.sku;return e.find((function(e){return e.sku===c}))?e.map((function(e){return e.sku===c?Object(j.a)(Object(j.a)({},e),{},{quantity:e.quantity+1}):e})):[].concat(Object(g.a)(e),[{id:r,sku:c,quantity:1}]);default:throw new Error("Unhandled action "+t.type)}}var k,C=r.a.createContext(null);try{var _;k=null!==(_=JSON.parse(localStorage.getItem("cart")))&&void 0!==_?_:[]}catch(V){console.error("The cart could not be parsed into JSON."),k=[]}function T(e){var t=Object(a.useReducer)(S,k),n=Object(m.a)(t,2),c=n[0],l=n[1];Object(a.useEffect)((function(){return localStorage.setItem("cart",JSON.stringify(c))}),[c]);var u={cart:c,dispatch:l};return r.a.createElement(C.Provider,{value:u},e.children)}function P(){var e=Object(a.useContext)(C);if(!e)throw new Error("useCart must be used within a cardprovider");return e}function w(e){var t=P().dispatch,n=Object(b.h)().id,c=Object(b.g)(),l=v("products/".concat(n)),u=l.data,i=l.error,o=l.loading,s=Object(a.useState)(""),E=Object(m.a)(s,2),d=E[0],f=E[1];if(o)return r.a.createElement(p,null);if(!u)return r.a.createElement(O,null);if(i)throw i;return r.a.createElement("div",{id:"detail"},r.a.createElement("h1",null,u.name),r.a.createElement("p",null,u.description),r.a.createElement("p",{id:"price"},u.price),r.a.createElement("select",{id:"size",value:d,onChange:function(e){f(e.target.value)}},r.a.createElement("option",{value:""},"What size?"),u.skus.map((function(e){return r.a.createElement("option",{value:e.sku,key:e.sku},e.size)}))),r.a.createElement("p",null,r.a.createElement("button",{className:"btn btn-primary",onClick:function(){t({type:"add",id:n,sku:d}),c("/cart")},disabled:!d},"Add To Cart")),r.a.createElement("img",{src:"/images/".concat(u.image),alt:u.category}))}function A(){var e=P(),t=e.cart,n=e.dispatch,c=function(e){var t=Object(a.useRef)([]),n=Object(a.useState)(null),r=Object(m.a)(n,2),c=r[0],l=r[1],u=Object(a.useState)(!0),i=Object(m.a)(u,2),o=i[0],s=i[1],p=Object(a.useState)(null),E=Object(m.a)(p,2),d=E[0],f=E[1];return Object(a.useEffect)((function(){if(n=t.current,a=e,n.length===a.length&&n.every((function(e,t){return e===a[t]})))s(!1);else{var n,a;t.current=e;var r=e.map((function(e){return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/shoes_shopping",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_BASE_URL+e).then((function(e){if(e.ok)return e.json();throw e}))}));Promise.all(r).then((function(e){return l(e)})).catch((function(e){console.error(e),f(e)})).finally((function(){return s(!1)}))}}),[e]),{data:c,loading:o,error:d}}(t.map((function(e){return"products/".concat(e.id)}))),l=c.data,u=c.loading,i=c.error,o=Object(b.g)();if(u)return r.a.createElement(p,null);if(i)throw i;var s=t.reduce((function(e,t){return e+t.quantity}),0);return r.a.createElement("section",{id:"cart"},r.a.createElement("h1",null,0===s?"Your cart is empty":"".concat(s," item").concat(s>1?"s":""," in My Cart")),r.a.createElement("ul",null,t.map((function(e){var t=e.id,a=e.sku,c=e.quantity,u=l.find((function(e){return e.id===parseInt(t)})),i=u.price,o=u.name,s=u.image,m=u.skus.find((function(e){return e.sku===a})).size;return r.a.createElement("li",{key:a,className:"cart-item"},r.a.createElement("img",{src:"/images/".concat(s),alt:o}),r.a.createElement("div",null,r.a.createElement("h3",null,o),r.a.createElement("p",null,"$",i),r.a.createElement("p",null,"Size: ",m),r.a.createElement("p",null,r.a.createElement("select",{"aria-label":"Select quantity for ".concat(o," size ").concat(m),onChange:function(e){n({type:"updateQuantity",sku:a,quantity:parseInt(e.target.value)})},value:c},r.a.createElement("option",{value:"0"},"Remove"),r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5")))))}))),t.length>0&&r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return o("/checkout")}},"Checkout"))}var I=n(9),N=Object({NODE_ENV:"production",PUBLIC_URL:"/shoes_shopping",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_BASE_URL;function R(e){return D.apply(this,arguments)}function D(){return(D=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(N+"shippingAddress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x="IDLE",U="SUBMITTING",F="SUBMITTED",q="COMPLETED",z={city:"",country:""};function B(){var e=P().dispatch,t=Object(a.useState)(z),n=Object(m.a)(t,2),c=n[0],l=n[1],u=Object(a.useState)(x),i=Object(m.a)(u,2),o=i[0],s=i[1],p=Object(a.useState)(null),E=Object(m.a)(p,2),h=E[0],v=E[1],b=Object(a.useState)({}),O=Object(m.a)(b,2),y=O[0],g=O[1],S=function(e){var t={};e.city||(t.city="City is required");e.country||(t.country="Country is required");return t}(c),k=0===Object.keys(S).length;function C(e){e.persist(),l((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(I.a)({},e.target.id,e.target.value))}))}function _(e){e.persist(),g((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(I.a)({},e.target.id,!0))}))}function T(){return(T=Object(f.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),s(U),!k){t.next=15;break}return t.prev=3,t.next=6,R(c);case 6:e({type:"empty"}),s(q),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),v(t.t0);case 13:t.next=16;break;case 15:s(F);case 16:case"end":return t.stop()}}),t,null,[[3,10]])})))).apply(this,arguments)}if(h)throw h;return o===q?r.a.createElement("h1",null,"Thanks for shopping!"):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Shipping Info"),!k&&o===F&&r.a.createElement("div",{role:"alert"},r.a.createElement("p",null,"Please fix the following problems "),r.a.createElement("ul",null,Object.keys(S).map((function(e){return r.a.createElement("li",{key:e},S[e])})))),r.a.createElement("form",{onSubmit:function(e){return T.apply(this,arguments)}},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"city"},"City"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",id:"city",value:c.city,onBlur:_,onChange:C}),r.a.createElement("p",{role:"alert"},(y.city||o===F)&&S.city)),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"country"},"Country"),r.a.createElement("br",null),r.a.createElement("select",{id:"country",value:c.country,onBlur:_,onChange:C},r.a.createElement("option",{value:""},"Select Country"),r.a.createElement("option",{value:"china"},"China"),r.a.createElement("option",{value:"india"},"India"),r.a.createElement("option",{value:"united kingdom"},"United Kingdom"),r.a.createElement("option",{value:"usa"},"USA")),r.a.createElement("p",{role:"alert"},(y.country||o===F)&&S.country)),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save Shipping Info",disabled:o===U})))}function L(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"content"},r.a.createElement(s,null),r.a.createElement("main",null,r.a.createElement(b.c,null,r.a.createElement(b.a,{path:"/",element:r.a.createElement("h1",null,"Welcome to Carved Rock Fitness")}),r.a.createElement(b.a,{path:"/:category",element:r.a.createElement(y,null)}),r.a.createElement(b.a,{path:"/:category/:id",element:r.a.createElement(w,null)}),r.a.createElement(b.a,{path:"/cart",element:r.a.createElement(A,null)}),r.a.createElement(b.a,{path:"/checkout",element:r.a.createElement(B,null)})))),r.a.createElement(u,null))}var W=n(14),K=n(15),H=n(18),J=n(16),M=function(e){Object(H.a)(n,e);var t=Object(J.a)(n);function n(e){var a;return Object(W.a)(this,n),(a=t.call(this,e)).state={hasError:!1},a}return Object(K.a)(n,[{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(r.a.Component);l.a.render(r.a.createElement(M,null,r.a.createElement(i.a,null,r.a.createElement(T,null,r.a.createElement(L,null)))),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.c88fd7c9.chunk.js.map